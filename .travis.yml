language: cpp
matrix:
  include:
  - compiler: clang
    os: linux
    dist: bionic
    sudo: required
    group: edge
  - compiler: gcc
    os: linux
    dist: bionic
    sudo: required
    group: edge

addons:
  apt:
    update: true
    packages:
    - libafflib-dev
    - libewf-dev
    - libpq-dev
    - autopoint
    - libsqlite3-dev
    - ant
    - libcppunit-dev
    - wget
    - openjdk-8-jdk
    - openjfx=8u161-b12-1ubuntu2
    - libopenjfx-java=8u161-b12-1ubuntu2
    - libopenjfx-jni=8u161-b12-1ubuntu2

python:
  - "2.7"

install:
  - ./travis_build.sh

script:
  - make check && if [ -f "tests/test-suite.log" ];then cat tests/test-suite.log; fi ; if [ -f "unit_tests/base/test-suite.log" ];then cat unit_tests/base/test-suite.log; fi

